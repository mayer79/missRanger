<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Fast Imputation of Missing Values • missRanger</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Fast Imputation of Missing Values">
<meta name="description" content="Alternative implementation of the beautiful MissForest algorithm used to impute mixed-type data sets by chaining random forests, introduced by Stekhoven, D.J. and Buehlmann, P. (2012) &lt;doi:10.1093/bioinformatics/btr597&gt;. Under the hood, it uses the lightning fast random forest package ranger. Between the iterative model fitting, we offer the option of using predictive mean matching. This firstly avoids imputation with values not already present in the original data (like a value 0.3334 in 0-1 coded variable). Secondly, predictive mean matching tries to raise the variance in the resulting conditional distributions to a realistic level. This would allow, e.g., to do multiple imputation when repeating the call to missRanger(). A formula interface allows to control which variables should be imputed by which.">
<meta property="og:description" content="Alternative implementation of the beautiful MissForest algorithm used to impute mixed-type data sets by chaining random forests, introduced by Stekhoven, D.J. and Buehlmann, P. (2012) &lt;doi:10.1093/bioinformatics/btr597&gt;. Under the hood, it uses the lightning fast random forest package ranger. Between the iterative model fitting, we offer the option of using predictive mean matching. This firstly avoids imputation with values not already present in the original data (like a value 0.3334 in 0-1 coded variable). Secondly, predictive mean matching tries to raise the variance in the resulting conditional distributions to a realistic level. This would allow, e.g., to do multiple imputation when repeating the call to missRanger(). A formula interface allows to control which variables should be imputed by which.">
<meta property="og:image" content="/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">missRanger</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/missRanger.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/multiple_imputation.html">Multiple Imputation</a></li>
    <li><a class="dropdown-item" href="articles/working_with_censoring.html">Censored Variables</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mayer79/missRanger/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="missranger-">{missRanger} 
<a class="anchor" aria-label="anchor" href="#missranger-"></a>
</h1>
</div>
<!-- badges: start -->


<!-- badges: end -->
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>{missRanger} uses the {ranger} package to do fast missing value imputation by chained random forest. As such, it serves as an alternative implementation of the beautiful ‘MissForest’ algorithm, see vignette.</p>
<p>The main function <code><a href="reference/missRanger.html">missRanger()</a></code> offers the option to combine random forest imputation with predictive mean matching. This firstly avoids the generation of values not present in the original data (like a value 0.3334 in a 0-1 coded variable). Secondly, this step tends to raise the variance in the resulting conditional distributions to a realistic level, a crucial element to apply multiple imputation frameworks.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># From CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"missRanger"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Development version</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mayer79/missRanger"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>We first generate a data set with about 10% missing values in each column. Then those gaps are filled by <code><a href="reference/missRanger.html">missRanger()</a></code>. In the end, the resulting data frame is displayed.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mayer79/missRanger" class="external-link">missRanger</a></span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Generate data with missing values in all columns</span></span>
<span><span class="va">irisWithNA</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generateNA.html">generateNA</a></span><span class="op">(</span><span class="va">iris</span>, seed <span class="op">=</span> <span class="fl">347</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Impute missing values</span></span>
<span><span class="va">irisImputed</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/missRanger.html">missRanger</a></span><span class="op">(</span><span class="va">irisWithNA</span>, pmm.k <span class="op">=</span> <span class="fl">3</span>, num.trees <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># Check results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">irisImputed</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">irisWithNA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Replace random forest by extremely randomized trees</span></span>
<span><span class="va">irisImputed_et</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/missRanger.html">missRanger</a></span><span class="op">(</span></span>
<span>  <span class="va">irisWithNA</span>, </span>
<span>  pmm.k <span class="op">=</span> <span class="fl">3</span>, </span>
<span>  splitrule <span class="op">=</span> <span class="st">"extratrees"</span>, </span>
<span>  num.trees <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using the pipe...</span></span>
<span><span class="va">iris</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/generateNA.html">generateNA</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/missRanger.html">missRanger</a></span><span class="op">(</span>pmm.k <span class="op">=</span> <span class="fl">5</span>, verbose <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span><span class="co"># More infos via `data_only = FALSE`</span></span>
<span><span class="va">imp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/missRanger.html">missRanger</a></span><span class="op">(</span><span class="va">irisWithNA</span>, pmm.k <span class="op">=</span> <span class="fl">3</span>, data_only <span class="op">=</span> <span class="cn">FALSE</span>, seed <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">imp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># missRanger object. Extract imputed data via $data</span></span>
<span><span class="co"># - best iteration: 3 </span></span>
<span><span class="co"># - best average OOB imputation error: 0.02058243 </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Sequence of OOB prediction errors:</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#      Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span></span>
<span><span class="co"># [1,]   1.00000000  1.03868004  0.267209559 0.103679645 0.08148148</span></span>
<span><span class="co"># [2,]   0.02948771  0.05997235  0.005676231 0.007813704 0.00000000</span></span>
<span><span class="co"># [3,]   0.02709505  0.06268752  0.004921649 0.008207934 0.00000000</span></span>
<span><span class="co"># [4,]   0.02673459  0.06504868  0.005183209 0.008761418 0.00000000</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Corresponding means:</span></span>
<span><span class="co"># [1] 0.49821014 0.02059000 0.02058243 0.02114558</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># First rows of imputed data:</span></span>
<span><span class="co"># </span></span>
<span><span class="co">#   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co"># 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span><span class="co"># 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span><span class="co"># 3          4.7         3.2          1.6         0.2  setosa</span></span></code></pre></div>
<p>Check out the vignettes for more info.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=missRanger" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mayer79/missRanger/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mayer79/missRanger/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing missRanger</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael Mayer <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=missRanger" class="external-link"><img src="http://www.r-pkg.org/badges/version/missRanger" alt="CRAN status"></a></li>
<li><a href="https://github.com/mayer79/missRanger/actions" class="external-link"><img src="https://github.com/mayer79/missRanger/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/mayer79/missRanger?branch=main" class="external-link"><img src="https://codecov.io/gh/mayer79/missRanger/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=missRanger" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/missRanger"></a></li>
<li><a href="https://cran.r-project.org/package=missRanger" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/missRanger?color=orange"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Mayer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
